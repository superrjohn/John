<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>ä¸€åˆ‡éƒ½æ˜¯éç¨‹ â€¢ Posts by &#34;java&#34; category</title>
        <link>https://superrjohn.github.io/John</link>
        <description></description>
        <language>zh-TW</language>
        <pubDate>Mon, 30 Oct 2023 22:10:06 +0800</pubDate>
        <lastBuildDate>Mon, 30 Oct 2023 22:10:06 +0800</lastBuildDate>
        <category>hexo</category>
        <category>java</category>
        <category>SpringSecurity</category>
        <category>RabbitMQ</category>
        <category>Radis</category>
        <category>SpringMVC</category>
        <category>Pinia</category>
        <category>Vue2</category>
        <category>SpringBoot</category>
        <item>
            <guid isPermalink="true">https://superrjohn.github.io/John/2023/10/30/java/SpringSecurity/SpringSecurity</guid>
            <title>SpringSecurity èªè­‰æˆæ¬Š</title>
            <link>https://superrjohn.github.io/John/2023/10/30/java/SpringSecurity/SpringSecurity</link>
            <category>SpringSecurity</category>
            <pubDate>Mon, 30 Oct 2023 22:10:06 +0800</pubDate>
            <description><![CDATA[ &lt;p&gt;åœ¨æ­¤ç‰¹åˆ«æ„Ÿè¬é»‘é¦¬ç¨‹åºå“¡æä¾›çš„èª²ç¨‹: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWo4NDExTjdCbS8=&#34;&gt;å­¸æˆåœ¨ç·š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;å‰è¨€&lt;br&gt;
æ–¼ç”±å¯¦ç¿’é …ç›®å¿«åšå®Œæ‰åšè¨˜éŒ„ï¼Œè€Œä¸”é …ç›®æ¨¡å¡Šè¼ƒå¤šï¼Œæ•…æŒ‘éƒ¨ä»½ä¾†è¨˜éŒ„ï¼Œæ‰€ä»¥é€™éä¸»è¦æ˜¯ SpringSecurity å…§å®¹ã€‚&lt;br&gt;
&lt;span class=&#34;rainbow&#34;&gt;å®Œæ•´é¡¹ç›®åœ°å€&lt;/span&gt;ï¼š&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3N1cGVycmpvaG4vamF2YV93ZWI=&#34;&gt;https://github.com/superrjohn/java_web&lt;/span&gt;&lt;/p&gt;
&lt;h1 id=&#34;æ¨¡å¡Šéœ€æ±‚åˆ†æ&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#æ¨¡å¡Šéœ€æ±‚åˆ†æ&#34;&gt;#&lt;/a&gt; æ¨¡å¡Šéœ€æ±‚åˆ†æ&lt;/h1&gt;
&lt;p&gt;ä»€éº¼æ˜¯èªè­‰æˆæ¬Šï¼Ÿ&lt;br&gt;
&lt;span class=&#34;yellow&#34;&gt; ä»€éº¼æ˜¯èªè­‰ï¼Ÿ&lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;èªè­‰å³ä½¿ç”¨è€…å»å­˜å–ç³»çµ±è³‡æºæ™‚ç³»çµ±è¦æ±‚é©—è­‰ä½¿ç”¨è€…çš„èº«åˆ†è¨Šæ¯ï¼Œèº«åˆ†åˆæ³•æ–¹å¯ç¹¼çºŒå­˜å–ã€‚ å¸¸è¦‹çš„ç”¨æˆ¶èº«ä»½èªè­‰çš„è¡¨ç¾å½¢å¼æœ‰ï¼šç”¨æˆ¶åå¯†ç¢¼ç™»éŒ„ï¼Œå¾®ä¿¡æƒç¢¼ç­‰æ–¹å¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span class=&#34;yellow&#34;&gt;ä»€éº¼æ˜¯æˆæ¬Šï¼Ÿ&lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;ä½¿ç”¨è€…èªè­‰é€šéå¾Œå»å­˜å–ç³»çµ±çš„è³‡æºï¼Œç³»çµ±æœƒåˆ¤æ–·ä½¿ç”¨è€…æ˜¯å¦æ“æœ‰å­˜å–è³‡æºçš„æ¬Šé™ï¼Œåªå…è¨±å­˜å–æœ‰æ¬Šé™çš„ç³»çµ±è³‡æºï¼Œæ²’æœ‰æ¬Šé™çš„è³‡æºå°‡ç„¡æ³•å­˜å–ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;æ¥­å‹™æµç¨‹&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#æ¥­å‹™æµç¨‹&#34;&gt;#&lt;/a&gt; æ¥­å‹™æµç¨‹&lt;/h2&gt;
&lt;p&gt;1ï¸âƒ£çµ±ä¸€èªè­‰ï¼šè¨ˆç•«åŒ…æ‹¬å­¸ç”Ÿã€å­¸ç¿’æ©Ÿæ§‹çš„è€å¸«ã€å¹³å°ç‡Ÿé‹äººå“¡ä¸‰é¡ç”¨æˆ¶ï¼Œä¸‰é¡ç”¨æˆ¶å°‡ä½¿ç”¨çµ±ä¸€çš„èªè­‰å…¥å£ã€‚&lt;/p&gt;
 &lt;img data-src=&#34;/John/img/java/SpringSecurity/2.png&#34; class=&#34;abc&#34; width=&#34;600&#34; height=&#34;350&#34;&gt;
&lt;p&gt;2ï¸âƒ£å–®é»ç™»é™¸ï¼šå–®ä¸€ç™»å…¥ï¼ˆSingle Sign Onï¼‰ï¼Œç°¡ç¨± SSOï¼Œæ˜¯ç›®å‰è¼ƒæµè¡Œçš„ä¼æ¥­æ¥­å‹™æ•´åˆçš„è§£æ±ºæ–¹æ¡ˆä¹‹ä¸€ã€‚ SSO çš„å®šç¾©æ˜¯åœ¨å¤šå€‹æ‡‰ç”¨ç³»çµ±ä¸­ï¼Œä½¿ç”¨è€…åªéœ€è¦ç™»å…¥ä¸€æ¬¡å°±å¯ä»¥å­˜å–æ‰€æœ‰äº’ä¿¡çš„æ‡‰ç”¨ç³»çµ±ã€‚&lt;/p&gt;
&lt;p&gt;3ï¸âƒ£ç¬¬ä¸‰æ–¹èªè­‰ï¼šæƒç¢¼ç™»å…¥çš„åŠŸèƒ½ï¼Œå¦‚ï¼šå¾®ä¿¡æƒç¢¼ç™»å…¥ã€QQ æƒç¢¼ç™»å…¥ç­‰ã€‚ æƒç¢¼ç™»å…¥çš„å¥½è™•æ˜¯ç”¨æˆ¶ä¸ç”¨è¼¸å…¥å¸³è™Ÿå’Œå¯†ç¢¼ï¼Œçœå»ç”¨æˆ¶è¨»å†Šçš„æˆæœ¬ï¼Œæ˜¯ä¸€ç¨®éå¸¸æœ‰æ•ˆçš„æ¨å»£æ‰‹æ®µã€‚&lt;/p&gt;
&lt;h1 id=&#34;spring-security-èªè­‰ç ”ç©¶&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#spring-security-èªè­‰ç ”ç©¶&#34;&gt;#&lt;/a&gt; Spring Security èªè­‰ç ”ç©¶&lt;/h1&gt;
&lt;h2 id=&#34;spring-securityä»‹ç´¹&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#spring-securityä»‹ç´¹&#34;&gt;#&lt;/a&gt; Spring Security ä»‹ç´¹&lt;/h2&gt;
&lt;p&gt;èªè­‰åŠŸèƒ½å¹¾ä¹æ˜¯æ¯å€‹å°ˆæ¡ˆéƒ½è¦å…·å‚™çš„åŠŸèƒ½ï¼Œè€Œä¸”å®ƒèˆ‡æ¥­å‹™ç„¡é—œï¼Œå¸‚é¢ä¸Šæœ‰è¨±å¤šèªè­‰æ¡†æ¶ï¼Œä¾‹å¦‚ï¼šApache Shiroã€CASã€Spring Security ç­‰ã€‚ ç”±æ–¼æœ¬å°ˆæ¡ˆæ˜¯åŸºæ–¼ Spring Cloud æŠ€è¡“æ§‹å»ºï¼ŒSpring Security æ˜¯ spring å®¶æ—çš„ä¸€ä»½å­ä¸”å’Œ Spring Cloud æ•´åˆçš„å¾ˆå¥½ï¼Œå› æ­¤æœ¬å°ˆæ¡ˆé¸ç”¨ Spring Security ä½œç‚ºèªè­‰æœå‹™çš„æŠ€è¡“æ¡†æ¶ã€‚&lt;/p&gt;
&lt;p&gt;Spring Security æ˜¯ä¸€å€‹åŠŸèƒ½å¼·å¤§ä¸”é«˜åº¦å¯è‡ªè¨‚çš„èº«ä»½é©—è­‰å’Œå­˜å–æ§åˆ¶æ¡†æ¶ï¼Œå®ƒæ˜¯ä¸€å€‹å°ˆæ³¨æ–¼ç‚º Java æ‡‰ç”¨ç¨‹å¼æä¾›èº«ä»½é©—è­‰å’Œæˆæ¬Šçš„æ¡†æ¶ã€‚&lt;/p&gt;
&lt;p&gt;å°ˆæ¡ˆé¦–é ï¼š&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9zcHJpbmcuaW8vcHJvamVjdHMvc3ByaW5nLXNlY3VyaXR5&#34;&gt;https://spring.io/projects/spring-security&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Spring cloud Securityï¼š &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9zcHJpbmcuaW8vcHJvamVjdHMvc3ByaW5nLWNsb3VkLXNlY3VyaXR5&#34;&gt;https://spring.io/projects/spring-cloud-security&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;èªè­‰æˆæ¬Šå…¥é–€&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#èªè­‰æˆæ¬Šå…¥é–€&#34;&gt;#&lt;/a&gt; èªè­‰æˆæ¬Šå…¥é–€&lt;/h3&gt;
&lt;p&gt;1ï¸âƒ£éƒ¨ç½²èªè­‰æœå‹™å·¥ç¨‹&lt;/p&gt;
&lt;p&gt;å¾èª²ç¨‹è³‡æ–™æ‹·è² xuecheng-plus-auth å·¥ç¨‹åˆ°è‡ªå·±çš„å·¥ç¨‹ç›®éŒ„ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å·¥ç¨‹æ˜¯ä¸€å€‹æ™®é€šçš„ spring boot å·¥ç¨‹ï¼Œå¯ä»¥é€£æ¥è³‡æ–™åº«ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å·¥ç¨‹ä¸å…·å‚™èªè­‰æˆæ¬Šçš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;2ï¸âƒ£å»ºç«‹è³‡æ–™åº«&lt;/p&gt;
&lt;p&gt;å»ºç«‹ xc_users è³‡æ–™åº«&lt;/p&gt;
&lt;p&gt;åŒ¯å…¥èª²ç¨‹è³‡æ–™ä¸­çš„ xcplus_users.sql è…³æœ¬ã€‚&lt;/p&gt;
&lt;p&gt;3ï¸âƒ£ä¿®æ”¹é…ç½®æ–‡ä»¶å’Œåœ¨ nacos è¨»å†Šï¼Œç«¯å£ç‚º 63070&lt;/p&gt;
&lt;h3 id=&#34;èªè­‰æ¸¬è©¦&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#èªè­‰æ¸¬è©¦&#34;&gt;#&lt;/a&gt; èªè­‰æ¸¬è©¦&lt;/h3&gt;
&lt;p&gt;1ï¸âƒ£ä¸‹é‚Šå‘ auth èªè­‰å·¥ç¨‹æ•´åˆ Spring securityï¼Œå‘ pom.xml åŠ å…¥ Spring Security æ‰€éœ€çš„ä¾è³´&lt;/p&gt;
&lt;figure class=&#34;highlight xml&#34;&gt;&lt;figcaption&gt;&lt;span&gt;pom.xml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;org.springframework.cloud&lt;span class=&#34;tag&#34;&gt;&amp;lt;/&lt;span class=&#34;name&#34;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;spring-cloud-starter-security&lt;span class=&#34;tag&#34;&gt;&amp;lt;/&lt;span class=&#34;name&#34;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;tag&#34;&gt;&amp;lt;/&lt;span class=&#34;name&#34;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;org.springframework.cloud&lt;span class=&#34;tag&#34;&gt;&amp;lt;/&lt;span class=&#34;name&#34;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;tag&#34;&gt;&amp;lt;&lt;span class=&#34;name&#34;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;spring-cloud-starter-oauth2&lt;span class=&#34;tag&#34;&gt;&amp;lt;/&lt;span class=&#34;name&#34;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;tag&#34;&gt;&amp;lt;/&lt;span class=&#34;name&#34;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;2ï¸âƒ£åˆå§‹å·¥ç¨‹è‡ªå‚™äº†ä¸€å€‹ Controller é¡ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;figcaption&gt;&lt;span&gt;java&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@Slf4j&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@RestController&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;title class_&#34;&gt;LoginController&lt;/span&gt; &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;meta&#34;&gt;@Autowired&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  XcUserMapper userMapper; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;meta&#34;&gt;@RequestMapping(&amp;quot;/login-success&amp;quot;)&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; String &lt;span class=&#34;title function_&#34;&gt;loginSuccess&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;ç™»å½•æˆåŠŸ&amp;quot;&lt;/span&gt;; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;meta&#34;&gt;@RequestMapping(&amp;quot;/user/&amp;#123;id&amp;#125;&amp;quot;)&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; XcUser &lt;span class=&#34;title function_&#34;&gt;getuser&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(&lt;span class=&#34;meta&#34;&gt;@PathVariable(&amp;quot;id&amp;quot;)&lt;/span&gt; String id)&lt;/span&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;type&#34;&gt;XcUser&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;xcUser&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; userMapper.selectById(id); &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; xcUser; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;meta&#34;&gt;@RequestMapping(&amp;quot;/r/r1&amp;quot;)&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; String &lt;span class=&#34;title function_&#34;&gt;r1&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;è®¿é—®r1èµ„æº&amp;quot;&lt;/span&gt;; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;meta&#34;&gt;@RequestMapping(&amp;quot;/r/r2&amp;quot;)&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; String &lt;span class=&#34;title function_&#34;&gt;r2&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;è®¿é—®r2èµ„æº&amp;quot;&lt;/span&gt;; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;3ï¸âƒ£åœ¨è³‡æ–™ä¸­æ‰¾åˆ° WebSecurityConfig è¨­å®šé¡æ”¾åˆ°æœ¬å·¥ç¨‹ä¸­ï¼Œå®ƒç¹¼æ‰¿ WebSecurityConfigurerAdapter, å®ƒæœ‰ä¸‰éƒ¨ä»½å…§å®¹:&lt;br&gt;
1. ç”¨æˆ¶è³‡è¨Šï¼šåœ¨è¨˜æ†¶é«”é…ç½®å…©å€‹ä½¿ç”¨è€…ï¼šzhangsanã€lisi,zhangsan ä½¿ç”¨è€…æ“æœ‰çš„æ¬Šé™ç‚º p1,lisi ä½¿ç”¨è€…æ“æœ‰çš„æ¬Šé™ç‚º p2&lt;/p&gt;
&lt;p&gt;2ã€å¯†ç¢¼æ–¹å¼ï¼šæš«æ™‚æ¡ç”¨æ˜æ–‡æ–¹å¼&lt;/p&gt;
&lt;p&gt;3. å®‰å…¨æ””æˆªæ©Ÿåˆ¶:/r/** é–‹é ­çš„è«‹æ±‚éœ€è¦èªè­‰ï¼Œç™»å…¥æˆåŠŸåˆ°æˆåŠŸé é¢ï¼Œç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;figcaption&gt;&lt;span&gt;java&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;//é…ç½®ç”¨æˆ·ä¿¡æ¯æœåŠ¡ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@Bean&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; UserDetailsService &lt;span class=&#34;title function_&#34;&gt;userDetailsService&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt; &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;//è¿™é‡Œé…ç½®ç”¨æˆ·ä¿¡æ¯,è¿™é‡Œæš‚æ—¶ä½¿ç”¨è¿™ç§æ–¹å¼å°†ç”¨æˆ·å­˜å‚¨åœ¨å†…å­˜ä¸­ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;type&#34;&gt;InMemoryUserDetailsManager&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;manager&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;title class_&#34;&gt;InMemoryUserDetailsManager&lt;/span&gt;(); &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        manager.createUser(User.withUsername(&lt;span class=&#34;string&#34;&gt;&amp;quot;zhangsan&amp;quot;&lt;/span&gt;).password(&lt;span class=&#34;string&#34;&gt;&amp;quot;123&amp;quot;&lt;/span&gt;).authorities(&lt;span class=&#34;string&#34;&gt;&amp;quot;p1&amp;quot;&lt;/span&gt;).build()); &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        manager.createUser(User.withUsername(&lt;span class=&#34;string&#34;&gt;&amp;quot;lisi&amp;quot;&lt;/span&gt;).password(&lt;span class=&#34;string&#34;&gt;&amp;quot;456&amp;quot;&lt;/span&gt;).authorities(&lt;span class=&#34;string&#34;&gt;&amp;quot;p2&amp;quot;&lt;/span&gt;).build()); &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; manager; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;@Bean&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; PasswordEncoder &lt;span class=&#34;title function_&#34;&gt;passwordEncoder&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt; &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;comment&#34;&gt;//å¯†ç ä¸ºæ˜æ–‡æ–¹å¼ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; NoOpPasswordEncoder.getInstance(); &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;//é…ç½®å®‰å…¨æ‹¦æˆªæœºåˆ¶ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;@Override&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;protected&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title function_&#34;&gt;configure&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(HttpSecurity http)&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;throws&lt;/span&gt; Exception &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        http &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                .authorizeRequests() &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                .antMatchers(&lt;span class=&#34;string&#34;&gt;&amp;quot;/r/**&amp;quot;&lt;/span&gt;).authenticated()&lt;span class=&#34;comment&#34;&gt;//è®¿é—®/rå¼€å§‹çš„è¯·æ±‚éœ€è¦è®¤è¯é€šè¿‡ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                .anyRequest().permitAll()&lt;span class=&#34;comment&#34;&gt;//å…¶å®ƒè¯·æ±‚å…¨éƒ¨æ”¾è¡Œ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                .and() &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                .formLogin().successForwardUrl(&lt;span class=&#34;string&#34;&gt;&amp;quot;/login-success&amp;quot;&lt;/span&gt;);&lt;span class=&#34;comment&#34;&gt;//ç™»å½•æˆåŠŸè·³è½¬åˆ°/login-success &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                http.logout().logoutUrl(&lt;span class=&#34;string&#34;&gt;&amp;quot;/logout&amp;quot;&lt;/span&gt;);&lt;span class=&#34;comment&#34;&gt;//é€€å‡ºåœ°å€ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;1. è¨ªå• localhost:63070/auth/login&lt;br&gt;
2. è¼¸å…¥å¸³è™Ÿ zhangsan, å¯†ç¢¼ 123&lt;br&gt;
3. ç™»éŒ„æˆåŠŸå¾Œï¼Œé é¢æœƒè·³è½‰ï¼Œé€™æ¨£èªè­‰èº«ä»½å°±å®Œæˆäº†&lt;/p&gt;
&lt;p&gt;4ï¸âƒ£æ·»åŠ æˆæ¬Š&lt;br&gt;
ğŸ”´ä½¿ç”¨è€…èªè­‰é€éå»å­˜å–ç³»çµ±è³‡æºæ™‚ spring security é€²è¡Œæˆæ¬Šæ§åˆ¶ï¼Œåˆ¤æ–·ä½¿ç”¨è€…æ˜¯å¦æœ‰è©²è³‡æºçš„å­˜å–æ¬Šé™ï¼Œå¦‚æœæœ‰å‰‡ç¹¼çºŒè¨ªå•ï¼Œå¦‚æœæ²’æœ‰å‰‡æ‹’çµ•å­˜å–ã€‚&lt;br&gt;
1. åœ¨ WebSecurityConfig é¡åˆ¥è¨­å®š zhangsan æ“æœ‰ p1 æ¬Šé™ï¼Œlisi æ“æœ‰ p2 æ¬Šé™ã€‚&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;figcaption&gt;&lt;span&gt;java&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@Bean&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; UserDetailsService &lt;span class=&#34;title function_&#34;&gt;userDetailsService&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt; &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;//è¿™é‡Œé…ç½®ç”¨æˆ·ä¿¡æ¯,è¿™é‡Œæš‚æ—¶ä½¿ç”¨è¿™ç§æ–¹å¼å°†ç”¨æˆ·å­˜å‚¨åœ¨å†…å­˜ä¸­ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;type&#34;&gt;InMemoryUserDetailsManager&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;manager&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;title class_&#34;&gt;InMemoryUserDetailsManager&lt;/span&gt;(); &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    manager.createUser(User.withUsername(&lt;span class=&#34;string&#34;&gt;&amp;quot;zhangsan&amp;quot;&lt;/span&gt;).password(&lt;span class=&#34;string&#34;&gt;&amp;quot;123&amp;quot;&lt;/span&gt;).authorities(&lt;span class=&#34;string&#34;&gt;&amp;quot;p1&amp;quot;&lt;/span&gt;).build()); &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    manager.createUser(User.withUsername(&lt;span class=&#34;string&#34;&gt;&amp;quot;lisi&amp;quot;&lt;/span&gt;).password(&lt;span class=&#34;string&#34;&gt;&amp;quot;456&amp;quot;&lt;/span&gt;).authorities(&lt;span class=&#34;string&#34;&gt;&amp;quot;p2&amp;quot;&lt;/span&gt;).build()); &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; manager; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;2. åœ¨ controller ä¸­é…ç½® /r/r1 éœ€è¦ p1 æ¬Šé™ï¼Œ/r/r2 éœ€è¦ p2 æ¬Šé™ã€‚&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;figcaption&gt;&lt;span&gt;java&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@RestController&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;title class_&#34;&gt;LoginController&lt;/span&gt; &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    .... &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;@RequestMapping(&amp;quot;/r/r1&amp;quot;)&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;@PreAuthorize(&amp;quot;hasAuthority(&amp;#x27;p1&amp;#x27;)&amp;quot;)&lt;/span&gt;&lt;span class=&#34;comment&#34;&gt;//æ‹¥æœ‰p1æƒé™æ–¹å¯è®¿é—® &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; String &lt;span class=&#34;title function_&#34;&gt;r1&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;è®¿é—®r1èµ„æº&amp;quot;&lt;/span&gt;; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;@RequestMapping(&amp;quot;/r/r2&amp;quot;)&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;@PreAuthorize(&amp;quot;hasAuthority(&amp;#x27;p2&amp;#x27;)&amp;quot;)&lt;/span&gt;&lt;span class=&#34;comment&#34;&gt;//æ‹¥æœ‰p2æƒé™æ–¹å¯è®¿é—® &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; String &lt;span class=&#34;title function_&#34;&gt;r2&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;è®¿é—®r2èµ„æº&amp;quot;&lt;/span&gt;; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;  &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ... &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç¾åœ¨ç•¶ç”¨æˆ¶è¨ªå• /r/r1 æ™‚ï¼Œurl æœƒåˆ¤æ–·ç”¨æˆ¶æœ‰æ²’æœ‰è¨ªå•æ¬Šé™ p1, æ‰€ä»¥ zhangsan å¯ä»¥æˆåŠŸè¨ªå•ï¼Œè€Œ lisi ä¸èƒ½ï¼Œå› ç‚º lisi çš„æ¬Šé™ç‚º p2&lt;/p&gt;
&lt;img data-src=&#34;/John/img/java/SpringSecurity/r1r2.png&#34; class=&#34;abc&#34;&gt;
&lt;p&gt;5ï¸âƒ£å·¥ä½œåŸç†&lt;br&gt;
 Spring Security å° Web è³‡æºçš„ä¿è­·æ˜¯é  Filter å¯¦ç¾çš„ï¼Œæ‰€ä»¥å¾é€™å€‹ Filter ä¾†å…¥æ‰‹ï¼Œé€æ­¥æ·±å…¥ Spring Security åŸç†ã€‚ ç•¶åˆå§‹åŒ– Spring Security æ™‚ï¼Œæœƒå»ºç«‹ä¸€å€‹åç‚º SpringSecurityFilterChain çš„ Servlet éæ¿¾å™¨ï¼Œé¡å‹ç‚º org.springframework.security.web.FilterChainProxyï¼Œå®ƒå¯¦ä½œäº† javax.servlet.Filterï¼Œå› æ­¤å¤–éƒ¨çš„è¦æ±‚æœƒç¶“éæ­¤é¡ï¼Œä¸‹åœ–æ˜¯ Spring Security éæ…®å™¨éˆçµæ§‹åœ–ï¼š&lt;/p&gt;
&lt;img data-src=&#34;/John/img/java/SpringSecurity/3.png&#34; class=&#34;abc&#34; width=&#34;400&#34; height=&#34;300&#34;&gt;
&lt;p&gt;FilterChainProxy æ˜¯ä¸€å€‹ä»£ç†ï¼ŒçœŸæ­£é‹ä½œçš„æ˜¯ FilterChainProxy ä¸­ SecurityFilterChain æ‰€åŒ…å«çš„å„å€‹ Filterï¼Œè€Œ Filter ä¸æœƒç›´æ¥è™•ç†èªè­‰å’Œæˆæ¬Šï¼Œè€Œæ˜¯æŠŠå®ƒå€‘äº¤çµ¦äº†èªè­‰ç®¡ç†å™¨ï¼ˆAuthenticationManagerï¼‰å’Œæ±ºç­–ç®¡ç†å™¨ï¼ˆAccessDecisionManagerï¼‰é€²è¡Œè™•ç†ã€‚&lt;/p&gt;
&lt;h1 id=&#34;oauth2èªè­‰æµç¨‹&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#oauth2èªè­‰æµç¨‹&#34;&gt;#&lt;/a&gt; OAuth2 èªè­‰æµç¨‹&lt;/h1&gt;
&lt;p&gt;åœ¨å‰é‚Šæˆ‘å€‘æåˆ°å¾®ä¿¡æƒç¢¼èªè­‰ï¼Œé€™æ˜¯ä¸€ç¨®ç¬¬ä¸‰æ–¹èªè­‰çš„æ–¹å¼ï¼Œé€™ç¨®èªè­‰æ–¹å¼æ˜¯åŸºæ–¼ OAuth2 å”å®šå¯¦ç¾ï¼Œ&lt;/p&gt;
&lt;p&gt;OAUTH å”å®šç‚ºä½¿ç”¨è€…è³‡æºçš„æˆæ¬Šæä¾›äº†ä¸€å€‹å®‰å…¨çš„ã€é–‹æ”¾è€Œåˆç°¡æ˜“çš„æ¨™æº–ã€‚ åŒæ™‚ï¼Œä»»ä½•ç¬¬ä¸‰æ–¹éƒ½å¯ä»¥ä½¿ç”¨ OAUTH èªè­‰æœå‹™ï¼Œä»»ä½•æœå‹™æä¾›è€…éƒ½å¯ä»¥å¯¦ç¾è‡ªèº«çš„ OAUTH èªè­‰æœå‹™ï¼Œå› è€Œ OAUTH æ˜¯é–‹æ”¾çš„ã€‚ æ¥­ç•Œæä¾›äº† OAUTH çš„å¤šç¨®å¯¦ä½œå¦‚ PHPã€JavaScriptï¼ŒJavaï¼ŒRuby ç­‰å„ç¨®èªè¨€é–‹ç™¼åŒ…ï¼Œå¤§å¤§ç¯€çœäº†ç¨‹å¼è¨­è¨ˆå¸«çš„æ™‚é–“ï¼Œå› è€Œ OAUTH æ˜¯ç°¡æ˜“çš„ã€‚ ç¶²è·¯è¨±å¤šæœå‹™å¦‚ Open APIï¼Œè¨±å¤šå¤§å…¬å¸å¦‚ç©€æ­Œï¼ŒYahooï¼ŒMicrosoft ç­‰éƒ½æä¾›äº† OAUTH èªè­‰æœå‹™ï¼Œé€™äº›éƒ½è¶³ä»¥èªªæ˜ OAUTH æ¨™æº–é€æ¼¸æˆç‚ºé–‹æ”¾è³‡æºæˆæ¬Šçš„æ¨™æº–ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;     Oauthå”å®šç›®å‰ç™¼å±•åˆ°2.0ç‰ˆæœ¬ï¼Œ1.0ç‰ˆæœ¬éæ–¼è¤‡é›œï¼Œ2.0ç‰ˆæœ¬å·²å»£æ³›æ‡‰ç”¨ã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åƒè€ƒï¼š&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS9vQXV0aC83MTUzMTM0P2ZyPWFsYWRkaW4=&#34;&gt;https://baike.baidu.com/item/oAuth/7153134?fr=aladdin&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Oauth å”è­°ï¼š&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY3NDk=&#34;&gt;https://tools.ietf.org/html/rfc6749&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ç¾åœ¨ææ¸…æ¥šå¹¾å€‹æ¦‚å¿µï¼š&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;green&#34;&gt;è³‡æº&lt;/span&gt;ï¼šä½¿ç”¨è€…è¨Šæ¯ï¼Œåœ¨å¾®ä¿¡ä¸­å„²å­˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;green&#34;&gt;è³‡æºæ“æœ‰è€…&lt;/span&gt;ï¼šä½¿ç”¨è€…æ˜¯ä½¿ç”¨è€…è³‡è¨Šè³‡æºçš„æ“æœ‰è€…ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;green&#34;&gt;èªè­‰æœå‹™&lt;/span&gt;ï¼šå¾®ä¿¡è² è²¬èªè­‰ç›®å‰ä½¿ç”¨è€…çš„èº«ä»½ï¼Œè² è²¬ç‚ºå®¢æˆ¶ç«¯é ’ç™¼ä»¤ç‰Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;green&#34;&gt;å®¢æˆ¶ç«¯&lt;/span&gt;ï¼šå®¢æˆ¶ç«¯æœƒæ”œå¸¶ä»¤ç‰Œè«‹æ±‚å¾®ä¿¡ç²å–ä½¿ç”¨è€…è¨Šæ¯ï¼Œé»‘é¦¬ç¨‹å¼è¨­è¨ˆå¸«ç¶²ç«™å³å®¢æˆ¶ç«¯ï¼Œé»‘é¦¬ç¶²ç«™éœ€è¦åœ¨ç€è¦½å™¨ä¸­é–‹å•Ÿã€‚&lt;/p&gt;
&lt;img data-src=&#34;/John/img/java/SpringSecurity/4.png&#34; class=&#34;abc&#34; width=&#34;700&#34; height=&#34;300&#34;&gt;
&lt;p&gt;1. ç”¨æˆ¶é€²å…¥åˆ°ç¶²ç«™æ‰“é–‹æƒç¢¼ç•Œé¢ï¼Œé€²è¡Œå¾®ä¿¡æƒç¢¼&lt;br&gt;
 2. å¾®ä¿¡è¿”å›ä¿¡æ¯ï¼Œè©¢å•ç”¨æˆ¶æ˜¯å¦æˆæ¬Šå®¢æˆ¶ç«¯ä½¿ç”¨å€‹äººè³‡æ–™ï¼Œç”¨æˆ¶æŒ‰åŒæ„&lt;br&gt;
 3. å¾®ä¿¡ä¸‹ç™¼æˆæ¬Šç¢¼ï¼Œç¶²ç«™æ‡‰ç”¨å¸¶è‘—æˆæ¬Šç¢¼ç”³è«‹ä»¤ç‰Œï¼Œå¾®ä¿¡ä¸‹ç™¼ä»¤ç‰Œ (éç¨‹ä¸å¯è¦‹)&lt;br&gt;
 4. ç¶²ç«™æ‡‰ç”¨å¸¶è‘—ä»¤ç‰Œè«‹æ±‚ç”¨æˆ¶å€‹äººä¿¡æ¯ï¼ŒæˆåŠŸä¸¦è¿”å›ç¶²ç«™æ‡‰ç”¨ (éç¨‹ä¸å¯è¦‹)&lt;br&gt;
 5. ç”¨æˆ¶ç™»éŒ„æˆåŠŸ&lt;/p&gt;
&lt;h2 id=&#34;oauth2åœ¨æœ¬é …ç›®çš„æ‡‰ç”¨&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#oauth2åœ¨æœ¬é …ç›®çš„æ‡‰ç”¨&#34;&gt;#&lt;/a&gt; OAuth2 åœ¨æœ¬é …ç›®çš„æ‡‰ç”¨&lt;/h2&gt;
&lt;p&gt;äº†è§£å¾®ä¿¡æƒç¢¼ç™»å…¥é»‘é¦¬ç¶²ç«™çš„æµç¨‹ï¼Œæ¥ä¸‹ä¾†èªè­˜ Oauth2.0 çš„èªè­‰æµç¨‹ï¼Œå¼•è‡ª Oauth2.0 å”å®š rfc6749 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY3NDk=&#34;&gt;https://tools.ietf.org/html/rfc6749&lt;/span&gt; ,&lt;br&gt;
Oauth2 æ˜¯ä¸€å€‹æ¨™æº–çš„é–‹æ”¾çš„æˆæ¬Šå”è­°ï¼Œç”¨æ–¼æ‡‰ç”¨ç¨‹å¼éœ€è¦ç”¨åˆ°ç¬¬ä¸‰æ–¹å¹³å°çš„è³‡æºï¼Œæ‡‰ç”¨ç¨‹å¼å¯ä»¥æ ¹æ“šè‡ªå·±çš„è¦æ±‚å»ä½¿ç”¨ Oauth2ï¼Œæœ¬å°ˆæ¡ˆä½¿ç”¨ Oauth2 å¯¦ç¾ä»¥ä¸‹ç›®æ¨™ï¼š&lt;br&gt;
1ï¸âƒ£å­¸æˆåœ¨ç·šä¸Šå­˜å–ç¬¬ä¸‰æ–¹ç³»çµ±çš„è³‡æºã€‚&lt;/p&gt;
&lt;p&gt;æœ¬å°ˆæ¡ˆè¦å­˜å–å¾®ä¿¡æƒç¢¼ç™»å…¥æ‰€ä»¥æœ¬å°ˆæ¡ˆè¦ä½¿ç”¨ OAuth2 å”å®šå­˜å–å¾®ä¿¡ä¸­çš„ä½¿ç”¨è€…è³‡è¨Šã€‚&lt;/p&gt;
&lt;p&gt;2ï¸âƒ£å¤–éƒ¨ç³»çµ±è¨ªå•å­¸æˆåœ¨ç·šçš„è³‡æº ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ¨£ç•¶ç¬¬ä¸‰æ–¹ç³»çµ±æƒ³è¦å­˜å–å­¸æˆç·šä¸Šç¶²ç«™çš„è³‡æºä¹Ÿå¯ä»¥åŸºæ–¼ OAuth2 å”è­°ã€‚&lt;/p&gt;
&lt;p&gt;3ï¸âƒ£å­¸æˆç·šä¸Šå‰ç«¯ï¼ˆå®¢æˆ¶ç«¯ï¼‰ å­˜å–å­¸æˆç·šä¸Šå¾®æœå‹™çš„è³‡æºã€‚&lt;/p&gt;
&lt;p&gt;æœ¬å°ˆæ¡ˆæ˜¯å‰å¾Œç«¯åˆ†é›¢æ¶æ§‹ï¼Œå‰ç«¯å­˜å–å¾®æœå‹™è³‡æºä¹Ÿå¯ä»¥åŸºæ–¼ OAuth2 å”å®šé€²è¡Œèªè­‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;oauth2çš„æˆæ¬Šæ¨¡å¼&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#oauth2çš„æˆæ¬Šæ¨¡å¼&#34;&gt;#&lt;/a&gt; OAuth2 çš„æˆæ¬Šæ¨¡å¼&lt;/h2&gt;
&lt;p&gt;Spring Security æ”¯æ´ OAuth2 èªè­‰ï¼ŒOAuth2 æä¾›æˆæ¬Šç¢¼æ¨¡å¼ã€å¯†ç¢¼æ¨¡å¼ã€ç°¡åŒ–æ¨¡å¼ã€å®¢æˆ¶ç«¯æ¨¡å¼ç­‰å››ç¨®æˆæ¬Šæ¨¡å¼ï¼Œæœ¬é …ç›®åªæœƒç”¨æˆæ¬Šç¢¼æ¨¡å¼ã€å¯†ç¢¼æ¨¡å¼ã€‚&lt;br&gt;
æˆæ¬Šç¢¼æ¨¡å¼ç°¡å–®ç­è§£æ˜¯ä½¿ç”¨æˆæ¬Šç¢¼å»å–å¾—ä»¤ç‰Œï¼Œè¦æƒ³å–å¾—ä»¤ç‰Œå…ˆè¦å–å¾—æˆæ¬Šç¢¼ï¼Œæˆæ¬Šç¢¼çš„å–å¾—éœ€è¦è³‡æºæ“æœ‰è€…è¦ªè‡ªæˆæ¬ŠåŒæ„æ‰å¯ä»¥å–å¾—ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹åœ–æ˜¯æˆæ¬Šç¢¼æ¨¡å¼çš„äº’å‹•åœ–ï¼š&lt;/p&gt;
&lt;img data-src=&#34;/John/img/java/SpringSecurity/5.png&#34; class=&#34;abc&#34; width=&#34;600&#34; height=&#34;400&#34;&gt;
&lt;h3 id=&#34;æˆæ¬Šç¢¼æ¨¡å¼æ¸¬è©¦&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#æˆæ¬Šç¢¼æ¨¡å¼æ¸¬è©¦&#34;&gt;#&lt;/a&gt; æˆæ¬Šç¢¼æ¨¡å¼æ¸¬è©¦&lt;/h3&gt;
&lt;p&gt;è‹¥è¦æ¸¬è©¦æˆæ¬Šæ¨¡å¼é¦–å…ˆè¦è¨­å®šæˆæ¬Šä¼ºæœå™¨å³ä¸Šåœ–ä¸­çš„èªè­‰ä¼ºæœå™¨ï¼Œéœ€è¦è¨­å®šæˆæ¬Šæœå‹™åŠä»¤ç‰Œç­–ç•¥ã€‚&lt;br&gt;
1ï¸âƒ£å¾èª²ç¨‹è³‡æ–™æ‹·è² AuthorizationServer.javaã€TokenConfig.java åˆ°èªè­‰æœå‹™çš„ config å¥—ä»¶ä¸‹ã€‚&lt;br&gt;
èªªæ˜ï¼šAuthorizationServer ç”¨ @EnableAuthorizationServer è¨»è§£æ¨™è­˜ä¸¦ç¹¼æ‰¿ AuthorizationServerConfigurerAdapter ä¾†è¨­å®š OAuth2.0 æˆæ¬Šä¼ºæœå™¨ã€‚&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;figcaption&gt;&lt;span&gt;java&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@Configuration&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@EnableAuthorizationServer&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;title class_&#34;&gt;AuthorizationServer&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;extends&lt;/span&gt; &lt;span class=&#34;title class_&#34;&gt;AuthorizationServerConfigurerAdapter&lt;/span&gt; &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;... &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;2ï¸âƒ£AuthorizationServerConfigurerAdapter è¦æ±‚é…ç½®ä»¥ä¸‹å¹¾å€‹é¡åˆ¥ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;figcaption&gt;&lt;span&gt;java&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;title class_&#34;&gt;AuthorizationServerConfigurerAdapter&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;implements&lt;/span&gt; &lt;span class=&#34;title class_&#34;&gt;AuthorizationServerConfigurer&lt;/span&gt; &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;title function_&#34;&gt;AuthorizationServerConfigurerAdapter&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt; &amp;#123;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title function_&#34;&gt;configure&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(AuthorizationServerSecurityConfigurer security)&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;throws&lt;/span&gt; Exception &amp;#123;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title function_&#34;&gt;configure&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(ClientDetailsServiceConfigurer clients)&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;throws&lt;/span&gt; Exception &amp;#123;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title function_&#34;&gt;configure&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(AuthorizationServerEndpointsConfigurer endpoints)&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;throws&lt;/span&gt; Exception &amp;#123;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;1ï¼‰ClientDetailsServiceConfigurerï¼šç”¨ä¾†è¨­å®šå®¢æˆ¶ç«¯è©³æƒ…æœå‹™ï¼ˆClientDetailsServiceï¼‰ï¼Œ&lt;/p&gt;
&lt;p&gt;éš¨ä¾¿ä¸€å€‹å®¢æˆ¶ç«¯éƒ½å¯ä»¥éš¨ä¾¿æ¥å–å®ƒçš„èªè­‰æœå‹™å—ï¼Ÿ ç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œæœå‹™æä¾›è€…æœƒçµ¦æ‰¹å‡†å­˜å–çš„å®¢æˆ¶ç«¯ä¸€å€‹èº«ä»½ï¼Œç”¨æ–¼å­˜å–æ™‚çš„æ†‘è­‰ï¼Œæœ‰å®¢æˆ¶ç«¯æ¨™è­˜å’Œå®¢æˆ¶ç«¯ç§˜é‘°ï¼Œåœ¨é€™è£¡é…ç½®æ‰¹å‡†å­˜å–çš„å®¢æˆ¶ç«¯çš„è©³ç´°è³‡è¨Šã€‚&lt;/p&gt;
&lt;p&gt;2ï¼‰AuthorizationServerEndpointsConfigurerï¼šç”¨ä¾†è¨­å®šä»¤ç‰Œï¼ˆtokenï¼‰çš„å­˜å–ç«¯é»å’Œä»¤ç‰Œæœå‹™ (token services)ã€‚&lt;/p&gt;
&lt;p&gt;3ï¼‰AuthorizationServerSecurityConfigurerï¼šç”¨ä¾†è¨­å®šä»¤ç‰Œç«¯é»çš„å®‰å…¨æ€§é™åˆ¶.&lt;/p&gt;
&lt;p&gt;2ã€TokenConfig ç‚ºä»¤ç‰Œç­–ç•¥é…ç½®é¡&lt;/p&gt;
&lt;p&gt;æš«æ™‚å…ˆä½¿ç”¨ InMemoryTokenStore åœ¨è¨˜æ†¶é«”å„²å­˜ä»¤ç‰Œï¼Œä»¤ç‰Œçš„æœ‰æ•ˆæœŸé™ç­‰è³‡è¨Šé…ç½®å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;figcaption&gt;&lt;span&gt;java&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;//ä»¤ç‰Œç®¡ç†æœåŠ¡ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@Bean(name=&amp;quot;authorizationServerTokenServicesCustom&amp;quot;)&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; AuthorizationServerTokenServices &lt;span class=&#34;title function_&#34;&gt;tokenService&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt; &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    DefaultTokenServices service=&lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;title class_&#34;&gt;DefaultTokenServices&lt;/span&gt;(); &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    service.setSupportRefreshToken(&lt;span class=&#34;literal&#34;&gt;true&lt;/span&gt;);&lt;span class=&#34;comment&#34;&gt;//æ”¯æŒåˆ·æ–°ä»¤ç‰Œ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    service.setTokenStore(tokenStore);&lt;span class=&#34;comment&#34;&gt;//ä»¤ç‰Œå­˜å‚¨ç­–ç•¥ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    service.setAccessTokenValiditySeconds(&lt;span class=&#34;number&#34;&gt;7200&lt;/span&gt;); &lt;span class=&#34;comment&#34;&gt;// ä»¤ç‰Œé»˜è®¤æœ‰æ•ˆæœŸ2å°æ—¶ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    service.setRefreshTokenValiditySeconds(&lt;span class=&#34;number&#34;&gt;259200&lt;/span&gt;); &lt;span class=&#34;comment&#34;&gt;// åˆ·æ–°ä»¤ç‰Œé»˜è®¤æœ‰æ•ˆæœŸ3å¤© &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; service; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;3ï¸âƒ£é…ç½®èªè­‰ç®¡ç† bean&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;figcaption&gt;&lt;span&gt;java&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@EnableWebSecurity&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@EnableGlobalMethodSecurity(securedEnabled = true,prePostEnabled = true)&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;title class_&#34;&gt;WebSecurityConfig&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;extends&lt;/span&gt; &lt;span class=&#34;title class_&#34;&gt;WebSecurityConfigurerAdapter&lt;/span&gt; &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;@Bean&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; AuthenticationManager &lt;span class=&#34;title function_&#34;&gt;authenticationManagerBean&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;throws&lt;/span&gt; Exception &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;built_in&#34;&gt;super&lt;/span&gt;.authenticationManagerBean(); &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    .... &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;4ï¸âƒ£é‡å•Ÿèªè­‰æœå‹™&lt;/p&gt;
&lt;p&gt;1.get è«‹æ±‚å–å¾—æˆæ¬Šç¢¼&lt;/p&gt;
&lt;p&gt;ä½å€: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL2xvY2FsaG9zdDo2MzA3MC9hdXRoL29hdXRoL2F1dGhvcml6ZT9jbGllbnRfaWQ9WGNXZWJBcHAmYW1wO3Jlc3BvbnNlX3R5cGU9Y29kZSZhbXA7c2NvcGU9YWxsJmFtcDtyZWRpcmVjdF91cmk9aHR0cDovL3d3dy41MXh1ZWNoZW5nLmNu&#34;&gt;http://localhost:63070/auth/oauth/authorize?client_id=XcWebApp&amp;amp;response_type=code&amp;amp;scope=all&amp;amp;redirect_uri=http://www.51xuecheng.cn&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;åƒæ•¸åˆ—è¡¨å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;client_idï¼šå®¢æˆ¶ç«¯å‡†å…¥æ¨™è­˜ã€‚&lt;/p&gt;
&lt;p&gt;response_typeï¼šæˆæ¬Šç¢¼æ¨¡å¼å›ºå®šç‚º codeã€‚&lt;/p&gt;
&lt;p&gt;scopeï¼šå®¢æˆ¶ç«¯æ¬Šé™ã€‚&lt;/p&gt;
&lt;p&gt;redirect_uriï¼šè·³è½‰ uriï¼Œæˆæ¬Šç¢¼ç”³è«‹æˆåŠŸå¾Œæœƒè·³åˆ°æ­¤ä½å€ï¼Œå¾Œé‚Šå¸¶ä¸Š code åƒæ•¸ï¼ˆæˆæ¬Šç¢¼ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¼¸å…¥å¸³è™Ÿ zhangsanã€å¯†ç¢¼ 123 ç™»å…¥æˆåŠŸï¼Œè¼¸å…¥ /oauth/authorize?client_id=XcWebApp&amp;amp;response_type=code&amp;amp;scope=all&amp;amp;redirect_uri=&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3d3dy41MXh1ZWNoZW5nLmNu&#34;&gt;http://www.51xuecheng.cn&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;é¡¯ç¤ºæˆæ¬Šé é¢&lt;/p&gt;
&lt;img data-src=&#34;/John/img/java/SpringSecurity/6.png&#34; class=&#34;abc&#34;&gt;
&lt;p&gt;æˆæ¬Šã€ŒXcWebAppã€å­˜å–è‡ªå·±çš„å—ä¿è­·è³‡æºï¼Ÿ&lt;/p&gt;
&lt;p&gt;é¸æ“‡åŒæ„ã€‚&lt;/p&gt;
&lt;p&gt;2. è«‹æ±‚æˆåŠŸï¼Œé‡æ–°å°å‘è‡³&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3d3dy41MXh1ZWNoZW5nLmNuLz9jb2RlPSVFNiU4RSU4OCVFNiVBQyU4QSVFNyVBMiVCQyVFRiVCQyU4QyVFNCVCRSU4QiVFNSVBNiU4MiVFRiVCQyU5QWh0dHA6Ly93d3cuNTF4dWVjaGVuZy5jbi8/Y29kZT1XcWpiNUg=&#34;&gt; http://www.51xuecheng.cn/?code = æˆæ¬Šç¢¼ï¼Œä¾‹å¦‚ï¼šhttp://www.51xuecheng.cn/?code=Wqjb5H&lt;/span&gt;&lt;br&gt;
3. ä½¿ç”¨ httpclient å·¥å…· post ç”³è«‹ä»¤ç‰Œ&lt;/p&gt;
&lt;p&gt;/oauth/token?client_id=XcWebApp&amp;amp;client_secret=XcWebApp&amp;amp;grant_type=authorization_code&amp;amp;code = æˆæ¬Šç¢¼ &amp;amp; redirect_uri=&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3d3dy41MXh1ZWNoZW5nLmNuLw==&#34;&gt;http://www.51xuecheng.cn/&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;åƒæ•¸åˆ—è¡¨å¦‚ä¸‹&lt;/p&gt;
&lt;p&gt;client_idï¼šå®¢æˆ¶ç«¯å‡†å…¥æ¨™è­˜ã€‚&lt;/p&gt;
&lt;p&gt;client_secretï¼šå®¢æˆ¶ç«¯ç§˜é‘°ã€‚&lt;/p&gt;
&lt;p&gt;grant_typeï¼šæˆæ¬Šé¡å‹ï¼Œå¡«å…¥ authorization_codeï¼Œè¡¨ç¤ºæˆæ¬Šç¢¼æ¨¡å¼&lt;/p&gt;
&lt;p&gt;codeï¼šæˆæ¬Šç¢¼ï¼Œå°±æ˜¯å‰›å‰›å–å¾—çš„æˆæ¬Šç¢¼ï¼Œæ³¨æ„ï¼šæˆæ¬Šç¢¼åªä½¿ç”¨ä¸€æ¬¡å°±ç„¡æ•ˆäº†ï¼Œéœ€è¦é‡æ–°ç”³è«‹ã€‚&lt;/p&gt;
&lt;p&gt;redirect_uriï¼šç”³è«‹æˆæ¬Šç¢¼æ™‚çš„è·³åˆ° urlï¼Œä¸€å®šå’Œç”³è«‹æˆæ¬Šç¢¼æ™‚ç”¨çš„ redirect_uri ä¸€è‡´ã€‚&lt;/p&gt;
&lt;p&gt;httpclient è…³æœ¬å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight text&#34;&gt;&lt;figcaption&gt;&lt;span&gt;text&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;### ç¬¬äºŒæ­¥ç”³è¯·ä»¤ç‰Œ &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;POST &amp;#123;&amp;#123;auth_host&amp;#125;&amp;#125;/auth/oauth/token?client_id=XcWebApp&amp;amp;client_secret=XcWebApp&amp;amp;grant_type=authorization_code&amp;amp;code=CTvCrB&amp;amp;redirect_uri=http://www.51xuecheng.cn1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç”³è«‹ä»¤ç‰ŒæˆåŠŸå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight json&#34;&gt;&lt;figcaption&gt;&lt;span&gt;json&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;attr&#34;&gt;&amp;quot;access_token&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;368b1ee7-a9ee-4e9a-aae6-0fcab243aad2&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;attr&#34;&gt;&amp;quot;token_type&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;bearer&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;attr&#34;&gt;&amp;quot;refresh_token&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;3d56e139-0ee6-4ace-8cbe-1311dfaa991f&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;attr&#34;&gt;&amp;quot;expires_in&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;7199&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;attr&#34;&gt;&amp;quot;scope&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;all&amp;quot;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;èªªæ˜ï¼š&lt;br&gt;
1ã€access_tokenï¼Œå­˜å–ä»¤ç‰Œï¼Œç”¨æ–¼å­˜å–è³‡æºä½¿ç”¨ã€‚&lt;br&gt;
2ã€token_typeï¼Œbearer æ˜¯åœ¨ RFC6750 ä¸­å®šç¾©çš„ä¸€ç¨® token é¡å‹ï¼Œåœ¨æ”œå¸¶ä»¤ç‰Œå­˜å–è³‡æºæ™‚éœ€è¦åœ¨ head ä¸­åŠ å…¥ bearer ç©ºæ ¼ ä»¤ç‰Œå…§å®¹&lt;br&gt;
 3ã€refresh_tokenï¼Œç•¶ä»¤ç‰Œå¿«éæœŸæ™‚ä½¿ç”¨åˆ·æ–°ä»¤ç‰Œå¯ä»¥å†æ¬¡ç”¢ç”Ÿä»¤ç‰Œã€‚&lt;br&gt;
4ã€expires_inï¼šéæœŸæ™‚é–“ï¼ˆç§’ï¼‰&lt;br&gt;
5ã€scopeï¼Œä»¤ç‰Œçš„æ¬Šé™ç¯„åœï¼Œæœå‹™ç«¯å¯ä»¥æ ¹æ“šä»¤ç‰Œçš„æ¬Šé™ç¯„åœå»å°ä»¤ç‰Œæˆæ¬Šã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¯†ç¢¼æ¨¡å¼&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#å¯†ç¢¼æ¨¡å¼&#34;&gt;#&lt;/a&gt; å¯†ç¢¼æ¨¡å¼&lt;/h3&gt;
&lt;p&gt;å¯†ç¢¼æ¨¡å¼ç›¸å°æˆæ¬Šç¢¼æ¨¡å¼ç°¡å–®ï¼Œæˆæ¬Šç¢¼æ¨¡å¼éœ€ä½¿ç”¨ç€è¦½å™¨ä¾›ä½¿ç”¨è€…è¦ªè‡ªæˆæ¬Šï¼Œå¯†ç¢¼æ¨¡å¼ä¸ç”¨ä½¿ç”¨ç€è¦½å™¨&lt;br&gt;
 1. è³‡æºæ“æœ‰è€…æä¾›å¸³è™ŸåŠå¯†ç¢¼&lt;/p&gt;
&lt;p&gt;2ã€å®¢æˆ¶ç«¯å‘èªè­‰æœå‹™ç”³è«‹ä»¤ç‰Œï¼Œè«‹æ±‚ä¸­æ”œå¸¶å¸³è™ŸåŠå¯†ç¢¼&lt;/p&gt;
&lt;p&gt;3ã€èªè­‰æœå‹™æ ¡é©—å¸³è™ŸåŠå¯†ç¢¼æ­£ç¢ºæ ¸ç™¼ä»¤ç‰Œã€‚&lt;br&gt;
1ã€POST è«‹æ±‚å–å¾—ä»¤ç‰Œ&lt;/p&gt;
&lt;p&gt;/oauth/token?client_id=XcWebApp&amp;amp;client_secret=XcWebApp&amp;amp;grant_type=password&amp;amp;username=shangsan&amp;amp;password=123&lt;/p&gt;
&lt;p&gt;åƒæ•¸åˆ—è¡¨å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;client_idï¼šå®¢æˆ¶ç«¯å‡†å…¥æ¨™è­˜ã€‚&lt;/p&gt;
&lt;p&gt;client_secretï¼šå®¢æˆ¶ç«¯ç§˜é‘°ã€‚&lt;/p&gt;
&lt;p&gt;grant_typeï¼šæˆæ¬Šé¡å‹ï¼Œå¡«å…¥ password è¡¨ç¤ºå¯†ç¢¼æ¨¡å¼&lt;/p&gt;
&lt;p&gt;usernameï¼šè³‡æºæ“æœ‰è€…ä½¿ç”¨è€…åç¨±ã€‚&lt;/p&gt;
&lt;p&gt;passwordï¼šè³‡æºæ“æœ‰è€…å¯†ç¢¼ã€‚&lt;/p&gt;
&lt;p&gt;2ã€æˆæ¬Šä¼ºæœå™¨å°‡ä»¤ç‰Œï¼ˆaccess_tokenï¼‰å‚³é€çµ¦ client&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ httpclient é€²è¡Œæ¸¬è©¦&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;figcaption&gt;&lt;span&gt;java&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;### å¯†ç æ¨¡å¼ &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;POST &amp;#123;&amp;#123;auth_host&amp;#125;&amp;#125;/auth/oauth/token?client_id=XcWebApp&amp;amp;client_secret=XcWebApp&amp;amp;grant_type=password&amp;amp;username=zhangsan&amp;amp;password=&lt;span class=&#34;number&#34;&gt;123&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿”å›ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight json&#34;&gt;&lt;figcaption&gt;&lt;span&gt;json&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;attr&#34;&gt;&amp;quot;access_token&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;368b1ee7-a9ee-4e9a-aae6-0fcab243aad2&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;attr&#34;&gt;&amp;quot;token_type&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;bearer&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;attr&#34;&gt;&amp;quot;refresh_token&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;3d56e139-0ee6-4ace-8cbe-1311dfaa991f&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;attr&#34;&gt;&amp;quot;expires_in&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;6806&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;attr&#34;&gt;&amp;quot;scope&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;all&amp;quot;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&#34;jwtä»¤ç‰Œ&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#jwtä»¤ç‰Œ&#34;&gt;#&lt;/a&gt; JWT ä»¤ç‰Œ&lt;/h1&gt;
&lt;h2 id=&#34;æ™®é€šä»¤ç‰Œçš„å•é¡Œ&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#æ™®é€šä»¤ç‰Œçš„å•é¡Œ&#34;&gt;#&lt;/a&gt; æ™®é€šä»¤ç‰Œçš„å•é¡Œ&lt;/h2&gt;
&lt;p&gt;å®¢æˆ¶ç«¯ç”³è«‹åˆ°ä»¤ç‰Œï¼Œæ¥ä¸‹ä¾†å®¢æˆ¶ç«¯æ”œå¸¶ä»¤ç‰Œå»å­˜å–è³‡æºï¼Œåˆ°è³‡æºä¼ºæœå™¨å°‡æœƒæ ¡é©—ä»¤ç‰Œçš„åˆæ³•æ€§ã€‚&lt;br&gt;
è³‡æºä¼ºæœå™¨å¦‚ä½•æ ¡é©—ä»¤ç‰Œçš„åˆæ³•æ€§ï¼Ÿæˆ‘å€‘ä»¥ OAuth2 çš„å¯†ç¢¼æ¨¡å¼ç‚ºä¾‹é€²è¡Œèªªæ˜ï¼š&lt;/p&gt;
&lt;img data-src=&#34;/John/img/java/SpringSecurity/7.png&#34; class=&#34;abc&#34; width=&#34;700&#34; height=&#34;400&#34;&gt;
&lt;p&gt;ğŸ‰é€™è£¡å­˜åœ¨ä¸€å€‹å•é¡Œï¼š&lt;br&gt;
å°±æ˜¯æ ¡é©—ä»¤ç‰Œéœ€è¦é ç«¯è«‹æ±‚èªè­‰æœå‹™ï¼Œå®¢æˆ¶ç«¯çš„æ¯æ¬¡å­˜å–éƒ½æœƒé ç«¯æ ¡é©—ï¼ŒåŸ·è¡Œæ•ˆèƒ½ä½ã€‚&lt;br&gt;
å¦‚æœèƒ½å¤ è®“è³‡æºæœå‹™è‡ªå·±æ ¡é©—ä»¤ç‰Œçš„åˆæ³•æ€§å°‡çœå»é ç«¯è«‹æ±‚èªè­‰æœå‹™çš„æˆæœ¬ï¼Œæé«˜äº†æ•ˆèƒ½&lt;/p&gt;
&lt;p&gt;ğŸ‰å¦‚ä½•è§£æ±ºä¸Šé‚Šçš„å•é¡Œï¼Œå¯¦ç¾è³‡æºæœå‹™è‡ªè¡Œæ ¡é©—ä»¤ç‰Œ:&lt;/p&gt;
&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯jwt&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#ä»€ä¹ˆæ˜¯jwt&#34;&gt;#&lt;/a&gt; ä»€ä¹ˆæ˜¯ JWT&lt;/h2&gt;
&lt;p&gt;ğŸŸ¢ä»¤ç‰Œæ¡ç”¨ JWT æ ¼å¼å³å¯è§£æ±ºä¸Šé‚Šçš„å•é¡Œï¼Œç”¨æˆ¶èªè­‰é€šéå¾Œæœƒå¾—åˆ°ä¸€å€‹ JWT ä»¤ç‰Œï¼ŒJWT ä»¤ç‰Œä¸­å·²ç¶“åŒ…æ‹¬äº†ç”¨æˆ¶ç›¸é—œçš„ä¿¡æ¯ï¼Œå®¢æˆ¶ç«¯åªéœ€è¦æ”œå¸¶ JWT è¨ªå•è³‡æºæœå‹™ï¼Œè³‡æºæœå‹™æ ¹æ“šäº‹å…ˆç´„å®š çš„æ¼”ç®—æ³•è‡ªè¡Œå®Œæˆä»¤ç‰Œæ ¡é©—ï¼Œç„¡éœ€æ¯æ¬¡éƒ½è«‹æ±‚èªè­‰æœå‹™å®Œæˆæˆæ¬Šã€‚&lt;/p&gt;
&lt;p&gt;ğŸŸ¡JSON Web Tokenï¼ˆJWTï¼‰æ˜¯ä¸€ç¨®ä½¿ç”¨ JSON æ ¼å¼å‚³éè³‡æ–™çš„ç¶²è·¯ä»¤ç‰ŒæŠ€è¡“ï¼Œå®ƒæ˜¯ä¸€å€‹é–‹æ”¾çš„è¡Œæ¥­æ¨™æº–ï¼ˆRFC 7519ï¼‰ï¼Œå®ƒå®šç¾©äº†ä¸€ç¨®ç°¡æ½”çš„ã€è‡ªåŒ…å«çš„å”è­°æ ¼å¼ï¼Œç”¨æ–¼åœ¨é€šä¿¡ é›™æ–¹å‚³é json å°è±¡ï¼Œå‚³éçš„è¨Šæ¯ç¶“éæ•¸ä½ç°½ç« å¯ä»¥é©—è­‰å’Œä¿¡ä»»ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ HMAC æ¼”ç®—æ³•æˆ–ä½¿ç”¨ RSA çš„å…¬é‘° / ç§é‘°å°ä¾†ç°½åï¼Œé˜²æ­¢å…§å®¹ç¯¡æ”¹ã€‚ å®˜ç¶²ï¼š&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9qd3QuaW8v&#34;&gt;https://jwt.io/&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ğŸ”´å‚³çµ±çš„åŸºæ–¼ session çš„æ–¹å¼æ˜¯æœ‰ç‹€æ…‹èªè­‰ï¼Œä½¿ç”¨è€…ç™»å…¥æˆåŠŸå°‡ä½¿ç”¨è€…çš„èº«ä»½è³‡è¨Šå„²å­˜åœ¨æœå‹™ç«¯ï¼Œé€™æ¨£åŠ å¤§äº†æœå‹™ç«¯çš„å„²å­˜å£“åŠ›ï¼Œä¸¦ä¸”é€™ç¨®æ–¹å¼ä¸é©åˆåœ¨åˆ†æ•£å¼ç³»çµ±ä¸­æ‡‰ç”¨ã€‚&lt;br&gt;
å¦‚ä¸‹åœ–ï¼Œç•¶ç”¨æˆ¶è¨ªå•æ‡‰ç”¨æœå‹™ï¼Œæ¯å€‹æ‡‰ç”¨æœå‹™éƒ½æœƒå»ä¼ºæœå™¨æŸ¥çœ‹ session ä¿¡æ¯ï¼Œå¦‚æœ session ä¸­æ²’æœ‰è©²ç”¨æˆ¶å‰‡èªªæ˜ç”¨æˆ¶æ²’æœ‰ç™»éŒ„ï¼Œæ­¤æ™‚å°±æœƒé‡æ–°èªè­‰ï¼Œè€Œè§£æ±ºé€™å€‹å•é¡Œçš„æ–¹æ³•æ˜¯ Session è¤‡è£½ã€Session é»è²¼ã€‚&lt;/p&gt;
&lt;img data-src=&#34;/John/img/java/SpringSecurity/8.png&#34; class=&#34;abc&#34; width=&#34;700&#34; height=&#34;400&#34;&gt;
&lt;p&gt;ğŸŸ¢å¦‚æœæ˜¯åŸºæ–¼ä»¤ç‰ŒæŠ€è¡“åœ¨åˆ†æ•£å¼ç³»çµ±ä¸­å¯¦ç¾èªè­‰å‰‡æœå‹™ç«¯ä¸ç”¨å„²å­˜ sessionï¼Œå¯ä»¥å°‡ç”¨æˆ¶è­˜åˆ¥è³‡è¨Šå„²å­˜åœ¨ä»¤ç‰Œä¸­ï¼Œç”¨æˆ¶èªè­‰é€éå¾Œèªè­‰æœå‹™é ’ç™¼ä»¤ç‰Œçµ¦ç”¨æˆ¶ï¼Œç”¨æˆ¶å°‡ä»¤ç‰Œå„²å­˜åœ¨å®¢æˆ¶ ç«¯ï¼Œå»è¨ªå•æ‡‰ç”¨æœå‹™æ™‚æ”œå¸¶ä»¤ç‰Œå»è¨ªå•ï¼Œæœå‹™ç«¯å¾ jwt è§£æå‡ºç”¨æˆ¶è³‡è¨Šã€‚ é€™å€‹éç¨‹å°±æ˜¯ç„¡ç‹€æ…‹èªè­‰ã€‚&lt;/p&gt;
&lt;p&gt;JWT ä»¤ç‰Œçš„å„ªé»ï¼š&lt;br&gt;
1ï¸âƒ£jwt åŸºæ–¼ jsonï¼Œéå¸¸æ–¹ä¾¿è§£æã€‚&lt;br&gt;
2ï¸âƒ£å¯ä»¥åœ¨ä»¤ç‰Œä¸­è‡ªè¨‚è±å¯Œçš„å…§å®¹ï¼Œæ˜“æ“´å……ã€‚&lt;br&gt;
3ï¸âƒ£é€ééå°ç¨±åŠ å¯†æ¼”ç®—æ³•åŠæ•¸ä½ç°½ç« æŠ€è¡“ï¼ŒJWT é˜²æ­¢ç«„æ”¹ï¼Œå®‰å…¨æ€§é«˜ã€‚&lt;br&gt;
4ï¸âƒ£è³‡æºæœå‹™ä½¿ç”¨ JWT å¯ä¸ä¾è³´èªè­‰æœå‹™å³å¯å®Œæˆæˆæ¬Šã€‚&lt;br&gt;
ç¼ºé»ï¼š&lt;br&gt;
JWT ä»¤ç‰Œè¼ƒé•·ï¼Œä½”å„²å­˜ç©ºé–“æ¯”è¼ƒå¤§ã€‚&lt;/p&gt;
&lt;p&gt;JWT ä»¤ç‰Œç”±ä¸‰éƒ¨åˆ†çµ„æˆï¼Œæ¯éƒ¨åˆ†ä¸­é–“ä½¿ç”¨ç‚¹ï¼ˆ.ï¼‰åˆ†éš”ï¼Œæ¯”å¦‚ï¼šxxxxx.yyyyy.zzzzz&lt;br&gt;
1ï¸âƒ£Header&lt;br&gt;
 é ­éƒ¨åŒ…æ‹¬ä»¤ç‰Œçš„é¡å‹ï¼ˆå³ JWTï¼‰åŠä½¿ç”¨çš„å“ˆå¸Œç®—æ³•ï¼ˆå¦‚ HMAC SHA256 æˆ– RSAï¼‰&lt;br&gt;
å†…å®¹ä½¿ç”¨ Base64Url ç¼–ç ï¼Œå¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²å°±æ˜¯ JWT ä»¤ç‰Œçš„ç¬¬ä¸€éƒ¨åˆ†ã€‚&lt;/p&gt;
  &lt;figure class=&#34;highlight json&#34;&gt;&lt;figcaption&gt;&lt;span&gt;json&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;attr&#34;&gt;&amp;quot;alg&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;HS256&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;attr&#34;&gt;&amp;quot;typ&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;JWT&amp;quot;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;2ï¸âƒ£Payload&lt;br&gt;
 ç¬¬äºŒéƒ¨åˆ†æ˜¯è² è¼‰ï¼Œå…§å®¹ä¹Ÿæ˜¯ä¸€å€‹ json å°è±¡ï¼Œå®ƒæ˜¯å­˜æ”¾æœ‰æ•ˆè³‡è¨Šçš„åœ°æ–¹ï¼Œå®ƒå¯ä»¥å­˜æ”¾ jwt æä¾›çš„è³‡è¨Šå­—æ®µï¼Œä¾‹å¦‚ï¼šissï¼ˆç°½ç™¼è€…ï¼‰,expï¼ˆéæœŸæ™‚é–“æˆ³è¨˜ï¼‰, subï¼ˆé¢å‘çš„ä½¿ç”¨è€…ï¼‰ ç­‰ï¼Œä¹Ÿå¯è‡ªè¨‚æ¬„ä½ã€‚&lt;br&gt;
æ­¤éƒ¨åˆ†ä¸å»ºè­°å­˜æ”¾æ•æ„Ÿè¨Šæ¯ï¼Œå› ç‚ºæ­¤éƒ¨åˆ†å¯ä»¥è§£ç¢¼é‚„åŸåŸå§‹å…§å®¹ã€‚&lt;br&gt;
æœ€å¾Œå°‡ç¬¬äºŒéƒ¨åˆ†è² è¼‰ä½¿ç”¨ Base64Url ç·¨ç¢¼ï¼Œå¾—åˆ°ä¸€å€‹å­—ä¸²å°±æ˜¯ JWT ä»¤ç‰Œçš„ç¬¬äºŒéƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;figure class=&#34;highlight json&#34;&gt;&lt;figcaption&gt;&lt;span&gt;json&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;attr&#34;&gt;&amp;quot;sub&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;1234567890&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;attr&#34;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;456&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;attr&#34;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;literal&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;true&lt;/span&gt;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;3ï¸âƒ£Signature&lt;br&gt;
 ç¬¬ä¸‰éƒ¨åˆ†æ˜¯ç°½åï¼Œæ­¤éƒ¨åˆ†ç”¨æ–¼é˜²æ­¢ jwt å…§å®¹è¢«ç«„æ”¹ã€‚&lt;br&gt;
é€™å€‹éƒ¨åˆ†ä½¿ç”¨ base64url å°‡å‰å…©éƒ¨åˆ†ç·¨ç¢¼ï¼Œç·¨ç¢¼å¾Œä½¿ç”¨é»ï¼ˆ.ï¼‰é€£æ¥çµ„æˆå­—ä¸²ï¼Œæœ€å¾Œä½¿ç”¨ header ä¸­è²æ˜çš„ç°½ç« æ¼”ç®—æ³•é€²è¡Œç°½ç« ã€‚&lt;/p&gt;
&lt;figure class=&#34;highlight json&#34;&gt;&lt;figcaption&gt;&lt;span&gt;json&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;HMACSHA256( &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  base64UrlEncode(header) + &lt;span class=&#34;string&#34;&gt;&amp;quot;.&amp;quot;&lt;/span&gt; + &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  base64UrlEncode(payload)&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  secret) &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;span class=&#34;green&#34;&gt;ç‚ºä»€éº¼ JWT å¯ä»¥é˜²æ­¢ç¯¡æ”¹ï¼Ÿ&lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;ç¬¬ä¸‰éƒ¨åˆ†ä½¿ç”¨ç°½åæ¼”ç®—æ³•å°ç¬¬ä¸€éƒ¨åˆ†å’Œç¬¬äºŒéƒ¨åˆ†çš„å…§å®¹é€²è¡Œç°½åï¼Œå¸¸ç”¨çš„ç°½åæ¼”ç®—æ³•æ˜¯ HS256ï¼Œå¸¸è¦‹çš„é‚„æœ‰ md5,sha ç­‰ï¼Œç°½åæ¼”ç®—æ³•éœ€è¦ä½¿ç”¨é‡‘é‘°é€²è¡Œç°½åï¼Œé‡‘é‘°ä¸å°å¤–å…¬é–‹ï¼Œä¸” ç°½ç« æ˜¯ä¸å¯é€†çš„ï¼Œå¦‚æœç¬¬ä¸‰æ–¹æ›´æ”¹äº†å…§å®¹é‚£éº¼ä¼ºæœå™¨é©—è­‰ç°½ç« å°±æœƒå¤±æ•—ï¼Œè¦æƒ³ä¿è­‰é©—è­‰ç°½ç« æ­£ç¢ºå¿…é ˆä¿è­‰å…§å®¹ã€é‡‘é‘°èˆ‡ç°½ç« å‰ä¸€è‡´ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://superrjohn.github.io/John/2023/10/27/java/springMVC/UserBook-Web</guid>
            <title>æ‰‹å¯«springMVC!</title>
            <link>https://superrjohn.github.io/John/2023/10/27/java/springMVC/UserBook-Web</link>
            <category>SpringMVC</category>
            <category>Pinia</category>
            <category>Vue2</category>
            <category>SpringBoot</category>
            <pubDate>Fri, 27 Oct 2023 17:24:46 +0800</pubDate>
            <description><![CDATA[ &lt;h2 id=&#34;å‰è¨€&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#å‰è¨€&#34;&gt;#&lt;/a&gt; å‰è¨€&lt;/h2&gt;
&lt;p&gt;åˆå­¸éšæ®µå…¨ç«¯çš„ä¸€å€‹é …ç›®ï¼Œæ˜¯ä¸€å€‹ç°¡å–®çš„ç”¨æˆ¶ç«¯åœ–æ›¸ç®¡ç†ç³»çµ±ï¼Œç™»éŒ„ç”¨ jwt ä»¤ç‰Œå¯¦ç¾ã€‚&lt;br&gt;
å‰ç«¯æ˜¯ç”¨ Vue2ã€Pinia åšç‹€æ…‹ç®¡ç†ã€bootstrap 5 (ä¸æ¨è–¦)ã€Axiosã€‚&lt;br&gt;
å¾Œç«¯ç”¨ SpringMVCã€SpringBootã€Mybatisã€MySQLã€‚&lt;br&gt;
æ–¼ç”±å°±æ˜¯ä¸€å€‹å¾ˆä¹…ä¹‹å‰çš„é …ç›®ï¼Œè€Œä¸”é …ç›®çµæ§‹å¾ˆç°¡å–®åªæ˜¯ç·´ç·´æ‰‹ï¼Œç¾åœ¨åªæ˜¯è£œå¯«ä¸€å€‹è¨˜éŒ„ï¼Œæ‰€ä»¥æˆ‘å°±ä¸æ¯å€‹æ­¥é©Ÿè¨˜éŒ„ï¼Œåªè¨˜éŒ„é‡é»ï½&lt;br&gt;
 é …ç›®åœ°å€:&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3N1cGVycmpvaG4vVXNlckJvb2stV2Vi&#34;&gt;https://github.com/superrjohn/UserBook-Web&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;é‚è¼¯åœ–&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#é‚è¼¯åœ–&#34;&gt;#&lt;/a&gt; é‚è¼¯åœ–&lt;/h2&gt;
&lt;p&gt;åšé …ç›®ã€æ¨¡å¡Šã€æ¥­å‹™åŠŸèƒ½ä¸€å®šè¦å…ˆå¯«é‚è¼¯åœ–ï¼Œä¸€ä¾†ç†æ¸…é‚è¼¯æ­¥é©Ÿï¼ŒäºŒä¾†è·Ÿè‘—æ­¥é©Ÿåšé–‹ç™¼ã€‚(é›–ç„¶é€™åœ–å¯«å¾—ä¸å¤ªå„ª)&lt;/p&gt;
&lt;img data-src=&#34;/John/img/java/springMVC/logic_diagram.png&#34; class=&#34;abc&#34; width=&#34;400&#34; height=&#34;700&#34;&gt;
&lt;h2 id=&#34;å‰ç«¯&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#å‰ç«¯&#34;&gt;#&lt;/a&gt; å‰ç«¯&lt;/h2&gt;
&lt;p&gt;å‰ç«¯æ–¹é¢ï¼Œæˆ‘æƒ³è¨˜éŒ„çš„æ˜¯&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9waW5pYS52dWVqcy5vcmcvemgvaW50cm9kdWN0aW9uLmh0bWw=&#34;&gt; Pinia&lt;/span&gt; ç‹€æ…‹ç®¡ç†åº«ï¼Œæœƒä»¥ Vue2 åšç°¡å–®èªªæ˜ã€‚&lt;br&gt;
1ï¸âƒ£å‰µä¸€å€‹ Pinia å¯¦ä¾‹å¹¶æ›è¼‰åˆ° Vue, å¦‚æœæ˜¯ Vue 2 é‚„éœ€è¦å®‰è£…ä¸€ä¸ªæ’ä»¶ PiniaVuePlugin, å¦‚æœæƒ³æ“æœ‰æŒä¹…åŒ–ï¼Œéœ€è¦å®‰è£ pinia-plugin-persistedstate æ’ä»¶ã€‚&lt;/p&gt;
&lt;img data-src=&#34;/John/img/java/springMVC/create_pinia.png&#34; class=&#34;abc&#34; width=&#34;600&#34; height=&#34;500&#34;&gt;
&lt;p&gt;2ï¸âƒ£Store å¯ä»¥ç†è§£æˆè¦ç‹€æ…‹ç®¡ç†çš„å°è±¡ï¼Œå®ƒæœ‰ä¸‰å€‹é‡è¦çš„éƒ¨ä»½çµ„æˆï¼Œåˆ†åˆ¥æ˜¯ stateã€getter å’Œ action, æœ¬é …ç›®åªç”¨åˆ° stateã€action,state æ˜¯å±¬æ€§ï¼Œè€Œ action æ˜¯æ”¹è®Šå±¬æ€§çš„æ–¹æ³•ï¼Œæˆ‘å°è£äº†æ ¹æ“šç”¨æˆ¶ ID ç™¼èµ·æŸ¥è©¢å€Ÿæ›¸è¨˜éŒ„çš„ API, è€Œ persist ç‚º true é–‹å•ŸæŒä¹…åŒ–ã€‚&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;figcaption&gt;&lt;span&gt;useBookStatus.js&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;import&lt;/span&gt; &amp;#123; defineStore &amp;#125; from &lt;span class=&#34;string&#34;&gt;&amp;#x27;pinia&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;import&lt;/span&gt; &amp;#123; userAPI &amp;#125; from &lt;span class=&#34;string&#34;&gt;&amp;#x27;@/apis/user&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;//å€‹äººå€Ÿæ›¸è¨˜éŒ„&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;export &lt;span class=&#34;type&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;useBookStatus&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; defineStore(&lt;span class=&#34;string&#34;&gt;&amp;#x27;bookStatus&amp;#x27;&lt;/span&gt;, &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    state: () =&amp;gt; (&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        bookStatus: []&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;),&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    actions: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        async &lt;span class=&#34;title function_&#34;&gt;getBookStatus&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(id)&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;type&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;res&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; await &lt;span class=&#34;title function_&#34;&gt;userAPI&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(id)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;built_in&#34;&gt;this&lt;/span&gt;.bookStatus = res.data.data&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;comment&#34;&gt;//console.log(this.bookStatus)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        clearBookStatus() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;built_in&#34;&gt;this&lt;/span&gt;.bookStatus = []&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    persist: &lt;span class=&#34;literal&#34;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;3ï¸âƒ£å€‹äººé çš„ JS å¤§æ¦‚é•·é€™æ¨£ï¼Œç”¨ mapActions () è¼”åŠ©å‡½æ•¸å°‡ action å±¬æ€§æ˜ å°„åˆ°ç»„ä»¶ä¸­ï¼Œç„¶å¾Œç•¶é é¢åŠ è¼‰å¾Œæ ¹æ“š id åŸ·è¡Œ getBookStatus æ–¹æ³•ï¼ŒæŸ¥è©¢å€‹äººçš„å€Ÿæ›¸è¨˜éŒ„&lt;/p&gt;
&lt;img data-src=&#34;/John/img/java/springMVC/status_action.png&#34; class=&#34;abc&#34; width=&#34;600&#34; height=&#34;500&#34;&gt;
&lt;h2 id=&#34;å¾Œç«¯&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#å¾Œç«¯&#34;&gt;#&lt;/a&gt; å¾Œç«¯&lt;/h2&gt;
&lt;p&gt;é …ç›®çµæ§‹ç°¡å–®ï¼Œä¸»è¦æ˜¯çˆ¶å·¥ç¨‹ï¼ŒPO é¡ï¼Œå·¥å…·é¡åªæœ‰ç”Ÿæˆå’Œè§£æ jwt ä»¤ç‰Œï¼Œä¸»è¦æ¥­å‹™é‚è¼¯å¯«åœ¨ boot-web-management&lt;/p&gt;
&lt;img data-src=&#34;/John/img/java/springMVC/boot-web-management.png&#34; class=&#34;abc&#34; width=&#34;300&#34; height=&#34;250&#34;&gt;
&lt;p&gt;1ï¸âƒ£é¦–å…ˆæ˜¯ç™»éŒ„åŠŸèƒ½ï¼ŒæŸ¥è©¢ç”¨æˆ¶è¡¨ï¼Œå¦‚æœç”¨æˆ¶å­˜åœ¨å‰›ç²å¾—ç”¨æˆ¶å°è±¡å¾Œç”Ÿæˆ jwt ä»¤ç‰Œè¿”å›å‰ç«¯ï¼Œæ²’æœ‰å‰‡è¿”å›ç™»éŒ„å¤±æ•—ä¿¡æ¯çµ¦å‰ç«¯&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;figcaption&gt;&lt;span&gt;java&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@Slf4j&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@RestController&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;title class_&#34;&gt;LoginController&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;@Autowired&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;private&lt;/span&gt; UserService userService;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;@PostMapping(&amp;quot;/login&amp;quot;)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; Result &lt;span class=&#34;title function_&#34;&gt;login&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(&lt;span class=&#34;meta&#34;&gt;@RequestBody&lt;/span&gt; User user)&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        log.info(&lt;span class=&#34;string&#34;&gt;&amp;quot;ç”¨æˆ¶ç™»éŒ„:&amp;#123;&amp;#125;&amp;quot;&lt;/span&gt;,user);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;type&#34;&gt;User&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;u&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; userService.login(user);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;comment&#34;&gt;//ç”¨æˆ¶ç™»éŒ„æˆåŠŸ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt;(u != &lt;span class=&#34;literal&#34;&gt;null&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            Map&amp;lt;String, Object&amp;gt; claims = &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;title class_&#34;&gt;HashMap&lt;/span&gt;&amp;lt;&amp;gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            claims.put(&lt;span class=&#34;string&#34;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;, u.getId());&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            claims.put(&lt;span class=&#34;string&#34;&gt;&amp;quot;username&amp;quot;&lt;/span&gt;, u.getUsername());&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            claims.put(&lt;span class=&#34;string&#34;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;, u.getName());&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;type&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;jwt&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; JwtUtils.generateJwt(claims);&lt;span class=&#34;comment&#34;&gt;//ç”Ÿæˆtokenä»¤ç‰Œ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; Result.success(jwt);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;comment&#34;&gt;//ç™»éŒ„å¤±æ•—&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; Result.error(&lt;span class=&#34;string&#34;&gt;&amp;quot;å¯†ç¢¼å¸³è™Ÿæœ‰éŒ¯&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;2ï¸âƒ£ä¹‹å¾Œéƒ½æ˜¯å°ç”¨æˆ¶çš„å€Ÿæ›¸ç‹€æ…‹å’Œåœ–æ›¸ç‹€æ…‹çš„å¢åˆªæ”¹æŸ¥ï¼Œä½¿ç”¨äº† interceptor æŸ¥è©¢ä»¤ç‰Œï¼Œæ²’æœ‰å‰‡æ””æˆªï¼Œé‚„æœ‰å…¨å±€ç•°å¸¸é…ç½®ç­‰ï¼Œæ²’ä»€éº¼ç‰¹åˆ¥ï¼Œå€¼å¾—èªªçš„æ˜¯æˆ‘ç”¨äº† Spring AOP, è‡ªå®šç¾©è¨»è§£ä¾†å°é‡è¦çš„æ“ä½œé€²è¡Œé¡å¤–çš„æ—¥èªŒè¨˜éŒ„ã€‚&lt;br&gt;
é¦–å…ˆè¦å‰µä¸€å€‹è‡ªå®šç¾©è¨»è§£ï¼Œèªªæ˜åœ¨å“ªæ–¹æ³•ä¸Šé‹è¡Œ&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;figcaption&gt;&lt;span&gt;java&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;//è‡ªå®šç¾©è¨»è§£,è¨˜éŒ„ä¿®æ”¹ç”¨æˆ¶ä¿®æ”¹æ—¥èªŒ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@Retention(RetentionPolicy.RUNTIME)&lt;/span&gt; &lt;span class=&#34;comment&#34;&gt;//é‹è¡Œæ™‚ç”Ÿæ•ˆ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@Target(ElementType.METHOD)&lt;/span&gt;&lt;span class=&#34;comment&#34;&gt;//è¨»æ˜æ–¹æ³•ä¸Šç”Ÿæ•ˆ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;meta&#34;&gt;@interface&lt;/span&gt; Log &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é€™è£¡æˆ‘ä½¿ç”¨äº† @Around åšåˆ‡å…¥æ–¹æ³•ï¼Œå› ç‚ºæˆ‘éœ€è¦è¨˜éŒ„åŸå§‹æ–¹æ³•çš„é‹è¡Œæ™‚é–“ï¼Œannotation å‰‡ä»¥è‡ªå®šç¾©è¨»è§£ç‚ºåˆ‡é»ã€‚&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;figcaption&gt;&lt;span&gt;java&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@Slf4j&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@Component&lt;/span&gt;&lt;span class=&#34;comment&#34;&gt;//äº¤çµ¦IOCç®¡ç†&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@Aspect&lt;/span&gt;&lt;span class=&#34;comment&#34;&gt;//åˆ‡é¢é¡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;title class_&#34;&gt;LogAspect&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;@Autowired&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;private&lt;/span&gt; HttpServletRequest request;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;@Autowired&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;private&lt;/span&gt; OperateLogMapper operateLogMapper;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;meta&#34;&gt;@Around(&amp;quot;@annotation(com.itheima.anno.Log)&amp;quot;)&lt;/span&gt;&lt;span class=&#34;comment&#34;&gt;//ä»¥è¨»è§£æ–¹å¼é…å‚™åˆ‡å…¥é»æ–¹æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; Object &lt;span class=&#34;title function_&#34;&gt;recordLog&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(ProceedingJoinPoint joinPoint)&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;throws&lt;/span&gt; Throwable &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;comment&#34;&gt;//æ“ä½œäººID,ç•¶å‰ç™»éŒ„å“¡å·¥çš„ID,ç²æœ€è«‹æ±‚é ­çš„JWTä»¤ç‰Œ,è§£æä»¤ç‰Œ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;type&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;jwt&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; request.getHeader(&lt;span class=&#34;string&#34;&gt;&amp;quot;token&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;type&#34;&gt;Claims&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;claims&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; JwtUtils.parseJWT(jwt);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;type&#34;&gt;Integer&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;operateUser&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; (Integer) claims.get(&lt;span class=&#34;string&#34;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;);&lt;span class=&#34;comment&#34;&gt;//Claimsé¡ç‚ºObject,æ‰€ä»¥è¦å¼·è½‰&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;comment&#34;&gt;//æ“ä½œæ™‚é–“&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;type&#34;&gt;LocalDateTime&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;operateTime&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; LocalDateTime.now();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;comment&#34;&gt;//æ“ä½œé¡å&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;type&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;className&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; joinPoint.getTarget().getClass().getName();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;comment&#34;&gt;//æ“ä½œæ–¹æ³•å&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;type&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;methodName&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; joinPoint.getSignature().getName();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;comment&#34;&gt;//æ“ä½œæ–¹æ³•åƒæ•¸&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        Object[] args = joinPoint.getArgs();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;type&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;methodParams&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; Arrays.toString(args);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;comment&#34;&gt;//é–‹å§‹èª¿ç”¨åŸå§‹æ–¹æ³•æ™‚é–“&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;type&#34;&gt;long&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;begin&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; System.currentTimeMillis();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;comment&#34;&gt;//èª¿ç”¨åŸå§‹ç›®æ¨™æ–¹æ³•é‹è¡Œ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;type&#34;&gt;Object&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; joinPoint.proceed();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;type&#34;&gt;long&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; System.currentTimeMillis();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;comment&#34;&gt;//æ–¹æ³•è¿”å›å€¼&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;type&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;returnValue&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; JSONObject.toJSONString(result);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;comment&#34;&gt;//æ“ä½œæ™‚é–“&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;type&#34;&gt;long&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;costTime&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; end - begin;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;comment&#34;&gt;//è¨˜éŒ„æ“ä½œæ—¥å¿—&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;type&#34;&gt;OperateLog&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;operateLog&lt;/span&gt; &lt;span class=&#34;operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;title class_&#34;&gt;OperateLog&lt;/span&gt;(&lt;span class=&#34;literal&#34;&gt;null&lt;/span&gt;,operateUser,operateTime,className,methodName,methodParams,returnValue,costTime);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        operateLogMapper.insert(operateLog);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        log.info(&lt;span class=&#34;string&#34;&gt;&amp;quot;AOPè¨˜éŒ„æ—¥å¿—:&amp;#123;&amp;#125;&amp;quot;&lt;/span&gt;, operateLog);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; result;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç„¶å¾Œåœ¨éœ€è¦çš„ API åŠ ä¸Šå°±å®Œæˆäº†&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;figcaption&gt;&lt;span&gt;java&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;@Log&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   &lt;span class=&#34;comment&#34;&gt;//ä¿®æ”¹æ›¸æœ¬å‡ºå€Ÿç‹€æ…‹å’Œæ–°å¢ç”¨æˆ¶å€Ÿæ›¸è¨˜éŒ„&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   &lt;span class=&#34;meta&#34;&gt;@PutMapping&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   &lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; Result &lt;span class=&#34;title function_&#34;&gt;updateStatus&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(&lt;span class=&#34;meta&#34;&gt;@RequestBody&lt;/span&gt; UserBorrow userBorrow)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       log.info(&lt;span class=&#34;string&#34;&gt;&amp;quot;å€Ÿå‡ºæ›¸æœ¬è³‡æ–™:&amp;#123;&amp;#125;&amp;quot;&lt;/span&gt;,userBorrow);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       bookService.updateStatus(userBorrow);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;       &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; Result.success();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;3ï¸âƒ£æˆ‘å° AOP çš„ç†è§£æ˜¯ï¼Œå®ƒæ˜¯ä»¥å‹•æ…‹ä»£ç†çš„æ–¹å¼å»å¢å¼·åŠŸèƒ½ï¼Œè¡¨é”å¼å‰‡æ˜¯è¦åŠ å¼·çš„æ–¹æ³• (åˆ‡é»), åˆ‡å…¥æ–¹æ³•å‰‡æ˜¯ä»€éº¼æ™‚å€™åšåŠ å¼·ï¼Œæ˜¯ä»£ç¢¼åŸ·è¡Œå‰é‚„æ˜¯å¾Œï¼Œè¦ç†è§£æºç¢¼é‚„æ˜¯è »è¤‡é›œçš„ï¼Œå¹¸å¥½èƒ½ç†è§£ä¸¦ä½¿ç”¨ä¸é›£ï½&lt;/p&gt;
&lt;img data-src=&#34;https://usagif.com/wp-content/uploads/gifs/thanks-for-watching-9.gif&#34; class=&#34;abc&#34; width=&#34;600&#34; height=&#34;350&#34;&gt; ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://superrjohn.github.io/John/2023/10/26/java/rabbitmq/rabbitmq</guid>
            <title>Hello RabbitMq!</title>
            <link>https://superrjohn.github.io/John/2023/10/26/java/rabbitmq/rabbitmq</link>
            <category>RabbitMQ</category>
            <pubDate>Thu, 26 Oct 2023 22:18:33 +0800</pubDate>
            <description><![CDATA[ &lt;p&gt;Welcome to &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvLw==&#34;&gt;Hexo&lt;/span&gt;! This is your very first post. Check &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3Mv&#34;&gt;documentation&lt;/span&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3MvdHJvdWJsZXNob290aW5nLmh0bWw=&#34;&gt;troubleshooting&lt;/span&gt; or you can ask me on &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2hleG9qcy9oZXhvL2lzc3Vlcw==&#34;&gt;GitHub&lt;/span&gt;.&lt;/p&gt;
&lt;h2 id=&#34;quick-start&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#quick-start&#34;&gt;#&lt;/a&gt; Quick Start&lt;/h2&gt;
&lt;h3 id=&#34;create-a-new-post&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#create-a-new-post&#34;&gt;#&lt;/a&gt; Create a new post&lt;/h3&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$ hexo new &lt;span class=&#34;string&#34;&gt;&amp;quot;My New Post&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvd3JpdGluZy5odG1s&#34;&gt;Writing&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;run-server&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#run-server&#34;&gt;#&lt;/a&gt; Run server&lt;/h3&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$ hexo server&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvc2VydmVyLmh0bWw=&#34;&gt;Server&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;generate-static-files&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#generate-static-files&#34;&gt;#&lt;/a&gt; Generate static files&lt;/h3&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$ hexo generate&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3MvZ2VuZXJhdGluZy5odG1s&#34;&gt;Generating&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;deploy-to-remote-sites&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#deploy-to-remote-sites&#34;&gt;#&lt;/a&gt; Deploy to remote sites&lt;/h3&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$ hexo deploy&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvb25lLWNvbW1hbmQtZGVwbG95bWVudC5odG1s&#34;&gt;Deployment&lt;/span&gt;&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://superrjohn.github.io/John/2023/10/26/java/radis/radis</guid>
            <title>Hello Radis!</title>
            <link>https://superrjohn.github.io/John/2023/10/26/java/radis/radis</link>
            <category>Radis</category>
            <pubDate>Thu, 26 Oct 2023 22:15:36 +0800</pubDate>
            <description><![CDATA[ &lt;p&gt;Welcome to &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvLw==&#34;&gt;Hexo&lt;/span&gt;! This is your very first post. Check &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3Mv&#34;&gt;documentation&lt;/span&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3MvdHJvdWJsZXNob290aW5nLmh0bWw=&#34;&gt;troubleshooting&lt;/span&gt; or you can ask me on &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2hleG9qcy9oZXhvL2lzc3Vlcw==&#34;&gt;GitHub&lt;/span&gt;.&lt;/p&gt;
&lt;h2 id=&#34;quick-start&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#quick-start&#34;&gt;#&lt;/a&gt; Quick Start&lt;/h2&gt;
&lt;h3 id=&#34;create-a-new-post&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#create-a-new-post&#34;&gt;#&lt;/a&gt; Create a new post&lt;/h3&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$ hexo new &lt;span class=&#34;string&#34;&gt;&amp;quot;My New Post&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvd3JpdGluZy5odG1s&#34;&gt;Writing&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;run-server&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#run-server&#34;&gt;#&lt;/a&gt; Run server&lt;/h3&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$ hexo server&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvc2VydmVyLmh0bWw=&#34;&gt;Server&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;generate-static-files&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#generate-static-files&#34;&gt;#&lt;/a&gt; Generate static files&lt;/h3&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$ hexo generate&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3MvZ2VuZXJhdGluZy5odG1s&#34;&gt;Generating&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;deploy-to-remote-sites&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#deploy-to-remote-sites&#34;&gt;#&lt;/a&gt; Deploy to remote sites&lt;/h3&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$ hexo deploy&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvb25lLWNvbW1hbmQtZGVwbG95bWVudC5odG1s&#34;&gt;Deployment&lt;/span&gt;&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://superrjohn.github.io/John/2023/10/26/java/test_java</guid>
            <title>Hello Java!</title>
            <link>https://superrjohn.github.io/John/2023/10/26/java/test_java</link>
            <category>java</category>
            <pubDate>Thu, 26 Oct 2023 22:10:33 +0800</pubDate>
            <description><![CDATA[ &lt;p&gt;Welcome to &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvLw==&#34;&gt;Hexo&lt;/span&gt;! This is your very first post. Check &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3Mv&#34;&gt;documentation&lt;/span&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3MvdHJvdWJsZXNob290aW5nLmh0bWw=&#34;&gt;troubleshooting&lt;/span&gt; or you can ask me on &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2hleG9qcy9oZXhvL2lzc3Vlcw==&#34;&gt;GitHub&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;ğŸ‰ ç›®å‰åªæ˜¯ç•¶åšåˆ†é¡ï¼Œé‚„æ²’æƒ³åˆ°å…§å®¹ï½&lt;/p&gt;
 ]]></description>
        </item>
    </channel>
</rss>
